<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite Video Carousel</title>
    <style>
        /* ================================================= */
        /* === VIDEO SECTION CSS (with Infinite Scroll) ==== */
        /* ================================================= */
        .video-section {
            margin: 0 auto;
            width: 100%;
            max-width: 1920px;
            padding: 40px 20px;
            text-align: center;
            overflow: hidden;
        }

        .video-header {
            font-family: "Luckiest Guy", cursive;
            font-size: 2rem;
            margin-bottom: 30px;
        }

        .video-slider {
            width: 100%;
            max-width: 1920px;
            overflow: hidden;
            position: relative;
        }

        /* Scroll animation keyframes */
        @keyframes scroll {
            from {
                transform: translateX(0);
            }
            to {
                /* Moves the track by 50% of its total width (the length of the first set) */
                transform: translateX(-50%);
            }
        }

        .video-track {
            display: flex;
            gap: 20px;
            /* Changed to hidden for animation control */
            overflow-x: hidden; 
            scrollbar-width: none;
            -ms-overflow-style: none;
            scroll-behavior: smooth;
            
            /* Apply the continuous scroll animation */
            animation: scroll 30s linear infinite; /* 30s must match JS duration */
            animation-play-state: running; 
        }

        /* Hide scrollbar for Chrome, Safari, Opera */
        .video-track::-webkit-scrollbar {
            display: none;
        }

        .video-box {
            flex: 0 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            cursor: pointer; /* Indicate it's interactive */
        }

        .scroll-video {
            width: 100%;
            max-width: 310px;
            height: 100%;
            max-height: 433px;
            background: #000;
            object-fit: cover;
            display: block;
        }

        .video-controls {
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 8px 15px;
            background: #f9f9f9;
        }

        .video-controls button {
            border: none;
            background: none;
            font-size: 18px;
            cursor: pointer;
            color: #2d7d46;
        }

        .video-controls button:hover {
            color: #000;
        }


        /* =============================================== */
        /* === Responsive Breakpoints (Mobile handles manual scroll) === */
        /* =============================================== */

        /* Large (Desktop/TV) - 1201px to 1920px */
        @media (min-width: 1201px) and (max-width: 1920px) {
            .video-header { font-size: 2.5rem; }
            .video-track { gap: 30px; }
            .scroll-video { max-width: 350px; max-height: 480px; }
        }

        /* Large (Desktop) - 1025px to 1200px */
        @media (min-width: 1025px) and (max-width: 1200px) {
            .video-header { font-size: 2.2rem; }
            .video-track { gap: 25px; }
            .scroll-video { max-width: 320px; max-height: 450px; }
        }

        /* Medium (Tablet) - 768px to 1024px */
        @media (min-width: 768px) and (max-width: 1024px) {
            .video-header { font-size: 2rem; margin-bottom: 25px; }
            .video-track { gap: 20px; }
            .scroll-video { max-width: 280px; max-height: 400px; }
        }

        /* 4. Small (Mobile Landscape) - 481px to 767px */
        @media (min-width: 481px) and (max-width: 767px) {
            .video-header { font-size: 1.6rem; margin-bottom: 20px; }
            .video-track {
                gap: 15px;
                overflow-x: auto; /* Re-enable manual scroll */
                scroll-snap-type: x mandatory;
                animation: none; /* Disable infinite scroll animation */
            }
            .video-box { min-width: 85%; scroll-snap-align: center; }
            .scroll-video { max-width: 240px; max-height: 340px; }
        }

        /* 5. Extra Small (Mobile Portrait) - 320px to 480px */
        @media (min-width: 320px) and (max-width: 480px) {
            .video-header { font-size: 1.4rem; margin-bottom: 15px; }
            .video-track {
                gap: 12px;
                overflow-x: auto; /* Re-enable manual scroll */
                scroll-snap-type: x mandatory;
                animation: none; /* Disable infinite scroll animation */
            }
            .video-box { min-width: 90%; scroll-snap-align: center; }
            .scroll-video { max-width: 200px; max-height: 300px; }
            .video-controls button { font-size: 16px; }
        }
    </style>
</head>
<body>

    <section class="video-section">
        <h2 class="video-header">TRUSTED BY VETS. LOVED BY PETS.</h2>

        <div class="video-slider">
            <div class="video-track">
                <div class="video-box">
                    <video class="scroll-video" loop muted playsinline>
                        <source src="./images/videos1.mp4" type="video/mp4" />
                    </video>
                    <div class="video-controls">
                        <button class="play-btn">â–¶</button>
                        <button class="mute-btn">ðŸ”‡</button>
                    </div>
                </div>

                <div class="video-box">
                    <video class="scroll-video" loop muted playsinline>
                        <source src="./images/video2.mp4" type="video/mp4" />
                    </video>
                    <div class="video-controls">
                        <button class="play-btn">â–¶</button>
                        <button class="mute-btn">ðŸ”‡</button>
                    </div>
                </div>

                <div class="video-box">
                    <video class="scroll-video" loop muted playsinline>
                        <source src="./images/video3.mp4" type="video/mp4" />
                    </video>
                    <div class="video-controls">
                        <button class="play-btn">â–¶</button>
                        <button class="mute-btn">ðŸ”‡</button>
                    </div>
                </div>
                
                <div class="video-box">
                    <video class="scroll-video" loop muted playsinline>
                        <source src="./images/video4.mp4" type="video/mp4" />
                    </video>
                    <div class="video-controls">
                        <button class="play-btn">â–¶</button>
                        <button class="mute-btn">ðŸ”‡</button>
                    </div>
                </div>
                
                <div class="video-box">
                    <video class="scroll-video" loop muted playsinline>
                        <source src="./images/videos1.mp4" type="video/mp4" />
                    </video>
                    <div class="video-controls">
                        <button class="play-btn">â–¶</button>
                        <button class="mute-btn">ðŸ”‡</button>
                    </div>
                </div>
                
                <div class="video-box">
                    <video class="scroll-video" loop muted playsinline>
                        <source src="./images/video2.mp4" type="video/mp4" />
                    </video>
                    <div class="video-controls">
                        <button class="play-btn">â–¶</button>
                        <button class="mute-btn">ðŸ”‡</button>
                    </div>
                </div>

                <div class="video-box">
                    <video class="scroll-video" loop muted playsinline>
                        <source src="./images/video3.mp4" type="video/mp4" />
                    </video>
                    <div class="video-controls">
                        <button class="play-btn">â–¶</button>
                        <button class="mute-btn">ðŸ”‡</button>
                    </div>
                </div>

                <div class="video-box">
                    <video class="scroll-video" loop muted playsinline>
                        <source src="./images/video4.mp4" type="video/mp4" />
                    </video>
                    <div class="video-controls">
                        <button class="play-btn">â–¶</button>
                        <button class="mute-btn">ðŸ”‡</button>
                    </div>
                </div>
                
            </div>
        </div>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const videoTrack = document.querySelector(".video-track");
            const videoBoxes = document.querySelectorAll(".video-box");
            const playButtons = document.querySelectorAll(".play-btn");
            const muteButtons = document.querySelectorAll(".mute-btn");
            const videos = document.querySelectorAll(".scroll-video");

            // Duration must match the CSS animation duration (30s)
            const animationDuration = 30000; // 30 seconds in milliseconds
            const resetTime = animationDuration / 2; // Reset after 15 seconds
            
            window.loopTimer = null; // Variable to hold the timer ID

            // --- Scroll Pause/Resume Functions ---

            // Function to pause the infinite scroll animation and loop logic
            const pauseScroll = () => {
                videoTrack.style.animationPlayState = "paused";
                if (window.loopTimer) {
                    clearTimeout(window.loopTimer); // Stop the reset timer
                    window.loopTimer = null;
                }
            };
            
            // Function to resume the continuous loop
            const applyInfiniteLoop = () => {
                // Clear any existing timer to prevent overlaps
                if (window.loopTimer) clearTimeout(window.loopTimer); 
                
                // Set the timer to trigger the position reset
                window.loopTimer = setTimeout(() => {
                    if (videoTrack.style.animationPlayState !== "paused") {
                        // 1. Instantly snap the track back to the start (translateX(0))
                        videoTrack.style.transition = 'none';
                        videoTrack.style.transform = 'translateX(0)';

                        // 2. Force a reflow (redraw) to apply the transition: none immediately
                        videoTrack.offsetWidth; 

                        // 3. Re-enable the animation transition
                        videoTrack.style.transition = ''; 
                        
                        // 4. Recursively call the function to keep the loop going
                        applyInfiniteLoop();
                    }
                }, resetTime);
            };

            // Start the infinite loop logic when the page loads
            applyInfiniteLoop();


            // --- User Interaction Logic ---
            
            // 1. Pause scroll when a video box is clicked 
            videoBoxes.forEach(box => {
                box.addEventListener("click", pauseScroll);
            });

            // 2. Play/Pause button logic
            playButtons.forEach((btn, index) => {
                btn.addEventListener("click", (event) => {
                    const video = videos[index];
                    pauseScroll(); // Stop the carousel when user interacts
                    event.stopPropagation();

                    if (video.paused) {
                        // Pause all other videos and update buttons
                        videos.forEach((v, i) => {
                            if (i !== index) {
                                v.pause();
                                playButtons[i].textContent = "â–¶";
                            }
                        });
                        
                        // Play the selected video
                        video.play().catch(error => {
                           console.error("Video play failed:", error);
                        });
                        btn.textContent = "â¸";
                        
                    } else {
                        // Pause the selected video
                        video.pause();
                        btn.textContent = "â–¶";
                    }
                });
            });

            // 3. Mute/Unmute button logic
            muteButtons.forEach((btn, index) => {
                btn.addEventListener("click", (event) => {
                    pauseScroll(); // Stop the carousel when user interacts
                    event.stopPropagation();
                    
                    const video = videos[index];
                    video.muted = !video.muted;
                    btn.textContent = video.muted ? "ðŸ”‡" : "ðŸ”Š";
                });
            });
        });
    </script>
</body>
</html>